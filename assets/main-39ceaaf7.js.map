{"version":3,"file":"main-39ceaaf7.js","sources":["../../src/js/refs.js","../../src/js/fetchApi.js","../../src/js/localStorageApi.js","../../src/img/icons.svg#discount-icon","../../src/img/icons.svg#discount-cart","../../src/img/icons.svg#discount-checked","../../src/js/discount.js","../../src/main.js"],"sourcesContent":["/*\nsimple refs API\n\nusage:\n\nadd to your html tags class 'js-object' and data-attribute 'data-jsname=\"yourName\"'\n\nimport refsAPI from './refs.js';\nconst frontEnd = new refsAPI();\n\nobject frontEnd will will containe all your nodes as properties.\n\nExample:\n\n<div class=\"js-object\" data-jsname=\"A\">                //nodeA\n      <div class=\"js-object\" data-jsname=\"B\"></div>    //nodeB\n</div>                                                 \n<div class=\"js-object\" data-jsname=\"C\"></div>          //nodeC\n<div class=\"js-object\" data-jsname=\"D\"></div>          //nodeD\n\nresults to\n\nfrontEnd==={\n    A : nodeA\n    B : nodeB\n    C : nodeC\n    D : nodeD\n}\n\n\nfrontEnd.refresh() - updates all nodes. use after adding new nodes to the document\n\n\n*/\n\nexport default class {\n  constructor() {\n    //add nodes as attributes\n    const nodes = document.querySelectorAll('.js-object');\n    for (let i = 0; i < nodes.length; i++) {\n      if ('dataset' in nodes[i]) {\n        if ('jsname' in nodes[i].dataset) {\n          this[nodes[i].dataset.jsname] = nodes[i];\n        }\n      }\n    }\n  }\n\n  refresh() {\n    //delete all attributes\n    for (var key in this) {\n      if (key in this) {\n        delete this[key];\n      }\n    }\n    //add nodes as attributes\n    const nodes = document.querySelectorAll('.js-object');\n    for (let i = 0; i < nodes.length; i++) {\n      if ('dataset' in nodes[i]) {\n        if ('jsname' in nodes[i].dataset) {\n          this[nodes[i].dataset.jsname] = nodes[i];\n        }\n      }\n    }\n  }\n}\n","/*\nfetchAPI for work with https://food-boutique.b.goit.study/\n\nusing example:\n\nimport fetchAPI from './js/fetchApi.js';\n\nasync function test() {\n  const product = await fetchAPI.product('640c2dd963a319ea671e3735');\n  console.log('product: ', product);\n}\n\nmethods:\n\nfetchAPI.categories() - returns array of categories\n\nfetchAPI.popular() - returns array of popular products\n\nfetchAPI.discount() - returns array of discount products\n\nfetchAPI.product(id) - returns product\nid - 'hdfgshfsjh35454hncnc'\n\nfetchAPI.products(filter) - returns object\n{\n  \"page\": 1,\n  \"perPage\": 3,\n  \"totalPages\": 4,\n  \"results\": [{product1},...]\n}\noptional parametr filter:\n    filter {\n        keyword : \"string\",\n        category : \"string\",\n        byABC : \"boolean\",\n        page : \"number\",\n        limit : \"number\",}\n\n\nfetchAPI.subscribe(email) - returns welcome message (string)\nemail -  'test@test.com'\n\nfetchAPI.order(cart) - returns confirmation message (string)\ncart \n    {\n  \"email\": \"test@gmail.com\",\n  \"products\": [{\"productId\": \"640c2dd963a319ea671e383b\",\n      \"amount\": 2},...]\n    }\n*/\n\nimport axios from 'axios';\n\nexport default {\n  _baseURL: 'https://food-boutique.b.goit.study/api',\n  _categoriesURL: '/products/categories',\n  _productsURL: '/products',\n  _popularURL: '/products/popular',\n  _discountURL: '/products/discount',\n  _subscriptionURL: '/subscription',\n  _orderURL: '/orders',\n\n  categories: async function categories() {\n    try {\n      const result = await axios.get(this._baseURL + this._categoriesURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  popular: async function popular() {\n    try {\n      const result = await axios.get(this._baseURL + this._popularURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  discount: async function discount() {\n    try {\n      const result = await axios.get(this._baseURL + this._discountURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  product: async function product(id) {\n    try {\n      const result = await axios.get(\n        this._baseURL + this._productsURL + `/${id}`\n      );\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  products: async function products(filter = {}) {\n    try {\n      const params = {\n        params: filter,\n      };\n      const result = await axios.get(this._baseURL + this._productsURL, params);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  subscribe: async function subscribe(email) {\n    try {\n      const params = {\n        email: email,\n      };\n      const result = await axios.post(\n        this._baseURL + this._subscriptionURL,\n        params\n      );\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  order: async function order(cart) {\n    try {\n      const result = await axios.post(this._baseURL + this._orderURL, cart);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n};\n","/*\n Simple localStorageApi to save/loade Filter and Cart\n\n\nusing example:\n\nimport localStorageApi from './js/localStorageApi.js';\n\nlocalStorageApi.saveFilter({ keyA: 'A', KeyB: 'B' });\nconst test = localStorageApi.loadFilter();\nconsole.log('test: ', test);\n\nmethods:\n\nlocalStorageApi.saveFilter(filter) - saves filter\n    all properties of filter are optional:\n    filter {\n        keyword : \"string\",\n        category : \"string\",\n        byABC : \"boolean\",\n        page : \"number\",\n        limit : \"number\",}\n\nlocalStorageApi.loadFilter() - returns filter\n\nlocalStorageApi.deleteFilter() - removes filter from storage\n\nlocalStorageApi.saveCart(cart) - saves cart\n  cart {\n    \"email\": \"test@gmail.com\",\n    \"products\": [{\"productId\": \"640c2dd963a319ea671e383b\",\n    \"amount\": 2},...]}\n\nlocalStorageApi.loadCart() - returns cart\n\nlocalStorageApi.deleteCart() - removes cart from storage\n\n\n\n\n*/\n\nexport default {\n  _filterID: 'filter-project-Bpfbt9js',\n  _cartID: 'cart-project-Bpfbt9js',\n  _save: function _save(key, data) {\n    try {\n      const jsonData = JSON.stringify(data);\n      localStorage.setItem(key, jsonData);\n    } catch (error) {\n      throw error;\n    }\n  },\n  _load: function _load(key) {\n    try {\n      const jsonData = localStorage.getItem(key);\n      if (jsonData === null) {\n        return {};\n      } else {\n        const data = JSON.parse(jsonData);\n        return data;\n      }\n    } catch (error) {\n      throw error;\n    }\n  },\n  _delete: function _delete(key) {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      throw error;\n    }\n  },\n  saveFilter: function saveFilter(filter) {\n    this._save(this._filterID, filter);\n  },\n  loadFilter: function loadFilter() {\n    let filter = this._load(this._filterID);\n    return filter;\n  },\n  deleteFilter: function deleteFilter() {\n    this._delete(this._filterID);\n  },\n  saveCart: function saveCart(cart) {\n    this._save(this._cartID, cart);\n  },\n  loadCart: function loadCart() {\n    let cart = this._load(this._cartID);\n    return cart;\n  },\n  deleteCart: function deleteCart() {\n    this._delete(this._cartID);\n  },\n};\n","export default \"__VITE_ASSET__9a76fdad__$_#discount-icon__\"","export default \"__VITE_ASSET__bf8d566a__$_#discount-cart__\"","export default \"__VITE_ASSET__cb42c3c5__$_#discount-checked__\"","import fetchAPI from './fetchApi.js';\nimport localStorageApi from './localStorageApi.js';\nimport refsAPI from './refs.js';\n\n// icons\nimport discountIcon from '../img/icons.svg#discount-icon';\nimport cartIcon from '../img/icons.svg#discount-cart';\nimport checkedIcon from '../img/icons.svg#discount-checked';\n\n// function to draw discount products section\nasync function drawDiscount() {\n  // number of products to draw\n  const DISCOUNTNUMBER = 2;\n  // get all nodes\n  const frontEnd = new refsAPI();\n  //clear\n  frontEnd.discountList.innerHTML = '';\n  //get list of discount products\n  const discountProducts = await fetchAPI.discount();\n\n  //array of products to draw\n  const productsToDraw = [];\n  let i = 0;\n  //do we have enough products to draw?\n  if (discountProducts.length < DISCOUNTNUMBER) {\n    i = discountProducts.length;\n  } else {\n    i = DISCOUNTNUMBER;\n  }\n  //choose random products and add to array to be drawn\n  for (; i > 0; i--) {\n    let randomNumber = Math.floor(Math.random() * discountProducts.length);\n    productsToDraw.push(discountProducts[randomNumber]);\n    discountProducts.splice(randomNumber, 1); //remove used products\n  }\n\n  //read saved Cart\n  let cart = localStorageApi.loadCart();\n  //get saved products id\n  const productsInCart = [];\n  if ('products' in cart) {\n    cart = cart.products;\n    cart.forEach(product => productsInCart.push(product.productId));\n  }\n  //draw discount products\n  const productsList = [];\n  productsToDraw.forEach(product => {\n    //chose icon\n    let icon = cartIcon;\n    if (productsInCart.includes(product._id)) {\n      icon = checkedIcon;\n    }\n    productsList.push(`\n        <li class=\"discount-list-item discount-show\" data-productId=\"${product._id}\">\n            <svg width=\"60\" height=\"60\" class=\"discount-icon discount-show\"  data-productId=\"${product._id}\">\n              <use href=\"${discountIcon}\" class=\"discount-show\"  data-productId=\"${product._id}\"></use>\n            </svg>\n            <div class=\"discount-image-box discount-show\"  data-productId=\"${product._id}\">\n              <img\n                class=\"discount-image discount-show\"\n                src=\"${product.img}\"\n                width=\"114\"\n                height=\"114\"\n                alt=\"${product.name}\"\n                data-productId=\"${product._id}\"\n              />\n            </div>\n            <div class=\"discount-description discount-show\"  data-productId=\"${product._id}\">\n              <p class=\"discount-title discount-show\"  data-productId=\"${product._id}\">${product.name}</p>\n              <div class=\"discount-description-price discount-show\"  data-productId=\"${product._id}\">\n                <span class=\"discount-price discount-show\"  data-productId=\"${product._id}\">$${product.price}</span>\n                <button type=\"button\" class=\"discount-icon-box discount-buy\" data-productId=\"${product._id}\">\n                  <svg width=\"18\" height=\"18\" class=\"discount-cart discount-buy\" data-productId=\"${product._id}\">\n                    <use href=\"${icon}\" class=\"js-object discount-buy\" data-jsname=\"discountIcon${product._id}\" data-productId=\"${product._id}\"></use>\n                  </svg>\n                </button>\n              </div>\n            </div>\n         </li>\n        `);\n  });\n  frontEnd.discountList.insertAdjacentHTML('beforeend', productsList.join(''));\n}\n\nfunction buyProduct(id) {\n  //read saved Cart\n  let cart = localStorageApi.loadCart();\n  //check if product in cart\n  let notInCart = true;\n  if ('products' in cart) {\n    cart.products.forEach(product => {\n      if (product.productId === id) {\n        notInCart = false;\n        return;\n      }\n    });\n  }\n  //if not in cart then add\n  if (notInCart) {\n    if ('products' in cart) {\n      cart.products.push({\n        productId: id,\n        amount: 1,\n      });\n    } else {\n      cart = {\n        email: '',\n        products: [{ productId: id, amount: 1 }],\n      };\n    }\n    //save cart and change icon\n    localStorageApi.saveCart(cart);\n  }\n}\n\n//change icon after adding product to cart\nfunction setCheckedIcon(id, prefix) {\n  const frontEnd = new refsAPI();\n  if (frontEnd[`${prefix}${id}`].href.baseVal === `${cartIcon}`) {\n    frontEnd[`${prefix}${id}`].href.baseVal = `${checkedIcon}`;\n  }\n}\n\n//change icon after deleting product from cart\nfunction setCartIcon(id, prefix) {\n  const frontEnd = new refsAPI();\n  if (frontEnd[`${prefix}${id}`].href.baseVal === `${checkedIcon}`) {\n    frontEnd[`${prefix}${id}`].href.baseVal = `${cartIcon}`;\n  }\n}\n\nfunction discountOnClick(event) {\n  if (event.target.classList.contains('discount-buy')) {\n    buyProduct(event.target.dataset.productid);\n    setCheckedIcon(event.target.dataset.productid, 'discountIcon');\n  } else if (event.target.classList.contains('discount-show')) {\n    // open modal window with product info\n  }\n}\n\nexport {\n  drawDiscount,\n  discountOnClick,\n  buyProduct,\n  setCheckedIcon,\n  setCartIcon,\n};\n","import refsAPI from './js/refs.js';\nimport { drawDiscount, discountOnClick } from './js/discount.js';\n\n\n// Test RenderProuctList\n\n\n//draw discount products\ndrawDiscount();\n\n//get DOM tree\nconst frontEnd = new refsAPI();\n\n//add event listener for discount products\nfrontEnd.discountList.addEventListener('click', discountOnClick);\n\n\n\n"],"names":["refsAPI","nodes","i","key","fetchAPI","axios","error","id","filter","params","email","cart","localStorageApi","data","jsonData","discountIcon","cartIcon","checkedIcon","drawDiscount","frontEnd","discountProducts","productsToDraw","randomNumber","productsInCart","product","productsList","icon","buyProduct","notInCart","setCheckedIcon","prefix","discountOnClick","event"],"mappings":"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"}