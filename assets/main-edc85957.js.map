{"version":3,"file":"main-edc85957.js","sources":["../../src/js/refs.js","../../src/js/fetchApi.js","../../src/js/localStorageApi.js","../../src/js/modalClose.js","../../src/img/icons.svg#close-icon","../../src/img/icons.svg#shopping-cart-icon","../../src/js/modalProduct.js","../../src/img/icons.svg#discount-icon","../../src/img/icons.svg#discount-cart","../../src/img/icons.svg#discount-checked","../../src/js/discount.js","../../src/js/popularProducts.js","../../src/js/footer-modal.js","../../src/js/renderProductList.js","../../src/js/filter.js","../../src/main.js"],"sourcesContent":["/*\nsimple refs API\n\nusage:\n\nadd to your html tags class 'js-object' and data-attribute 'data-jsname=\"yourName\"'\n\nimport refsAPI from './refs.js';\nconst frontEnd = new refsAPI();\n\nobject frontEnd will will containe all your nodes as properties.\n\nExample:\n\n<div class=\"js-object\" data-jsname=\"A\">                //nodeA\n      <div class=\"js-object\" data-jsname=\"B\"></div>    //nodeB\n</div>                                                 \n<div class=\"js-object\" data-jsname=\"C\"></div>          //nodeC\n<div class=\"js-object\" data-jsname=\"D\"></div>          //nodeD\n\nresults to\n\nfrontEnd==={\n    A : nodeA\n    B : nodeB\n    C : nodeC\n    D : nodeD\n}\n\n\nfrontEnd.refresh() - updates all nodes. use after adding new nodes to the document\n\n\n*/\n\nexport default class {\n  constructor() {\n    //add nodes as attributes\n    const nodes = document.querySelectorAll('.js-object');\n    for (let i = 0; i < nodes.length; i++) {\n      if ('dataset' in nodes[i]) {\n        if ('jsname' in nodes[i].dataset) {\n          this[nodes[i].dataset.jsname] = nodes[i];\n        }\n      }\n    }\n  }\n\n  refresh() {\n    //delete all attributes\n    for (var key in this) {\n      if (key in this) {\n        delete this[key];\n      }\n    }\n    //add nodes as attributes\n    const nodes = document.querySelectorAll('.js-object');\n    for (let i = 0; i < nodes.length; i++) {\n      if ('dataset' in nodes[i]) {\n        if ('jsname' in nodes[i].dataset) {\n          this[nodes[i].dataset.jsname] = nodes[i];\n        }\n      }\n    }\n  }\n}\n","/*\nfetchAPI for work with https://food-boutique.b.goit.study/\n\nusing example:\n\nimport fetchAPI from './js/fetchApi.js';\n\nasync function test() {\n  const product = await fetchAPI.product('640c2dd963a319ea671e3735');\n  console.log('product: ', product);\n}\n\nmethods:\n\nfetchAPI.categories() - returns array of categories\n\nfetchAPI.popular() - returns array of popular products\n\nfetchAPI.discount() - returns array of discount products\n\nfetchAPI.product(id) - returns product\nid - 'hdfgshfsjh35454hncnc'\n\nfetchAPI.products(filter) - returns object\n{\n  \"page\": 1,\n  \"perPage\": 3,\n  \"totalPages\": 4,\n  \"results\": [{product1},...]\n}\noptional parametr filter:\n    filter {\n        keyword : \"string\",\n        category : \"string\",\n        byABC : \"boolean\",\n        page : \"number\",\n        limit : \"number\",}\n\n\nfetchAPI.subscribe(email) - returns welcome message (string)\nemail -  'test@test.com'\n\nfetchAPI.order(cart) - returns confirmation message (string)\ncart \n    {\n  \"email\": \"test@gmail.com\",\n  \"products\": [{\"productId\": \"640c2dd963a319ea671e383b\",\n      \"amount\": 2},...]\n    }\n*/\n\nimport axios from 'axios';\n\nexport default {\n  _baseURL: 'https://food-boutique.b.goit.study/api',\n  _categoriesURL: '/products/categories',\n  _productsURL: '/products',\n  _popularURL: '/products/popular',\n  _discountURL: '/products/discount',\n  _subscriptionURL: '/subscription',\n  _orderURL: '/orders',\n\n  categories: async function categories() {\n    try {\n      const result = await axios.get(this._baseURL + this._categoriesURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  popular: async function popular() {\n    try {\n      const result = await axios.get(this._baseURL + this._popularURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  discount: async function discount() {\n    try {\n      const result = await axios.get(this._baseURL + this._discountURL);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  product: async function product(id) {\n    try {\n      const result = await axios.get(\n        this._baseURL + this._productsURL + `/${id}`\n      );\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  products: async function products(filter = {}) {\n    try {\n      const params = {\n        params: filter,\n      };\n      const result = await axios.get(this._baseURL + this._productsURL, params);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  subscribe: async function subscribe(email) {\n    try {\n      const params = {\n        email: email,\n      };\n      const result = await axios.post(\n        this._baseURL + this._subscriptionURL,\n        params\n      );\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n\n  order: async function order(cart) {\n    try {\n      const result = await axios.post(this._baseURL + this._orderURL, cart);\n      return result.data;\n    } catch (error) {\n      throw error;\n    }\n  },\n};\n","/*\n Simple localStorageApi to save/loade Filter and Cart\n\n\nusing example:\n\nimport localStorageApi from './js/localStorageApi.js';\n\nlocalStorageApi.saveFilter({ keyA: 'A', KeyB: 'B' });\nconst test = localStorageApi.loadFilter();\nconsole.log('test: ', test);\n\nmethods:\n\nlocalStorageApi.saveFilter(filter) - saves filter\n    all properties of filter are optional:\n    filter {\n        keyword : \"string\",\n        category : \"string\",\n        byABC : \"boolean\",\n        page : \"number\",\n        limit : \"number\",}\n\nlocalStorageApi.loadFilter() - returns filter\n\nlocalStorageApi.deleteFilter() - removes filter from storage\n\nlocalStorageApi.saveCart(cart) - saves cart\n  cart {\n    \"email\": \"test@gmail.com\",\n    \"products\": [{\"productId\": \"640c2dd963a319ea671e383b\",\n    \"amount\": 2},...]}\n\nlocalStorageApi.loadCart() - returns cart\n\nlocalStorageApi.deleteCart() - removes cart from storage\n\n\n\n\n*/\n\nimport { refreshIcons, drawHeaderCartNumber } from './discount';\n\nexport default {\n  _filterID: 'filter-project-Bpfbt9js',\n  _cartID: 'cart-project-Bpfbt9js',\n  _save: function _save(key, data) {\n    try {\n      const jsonData = JSON.stringify(data);\n      localStorage.setItem(key, jsonData);\n    } catch (error) {\n      throw error;\n    }\n  },\n  _load: function _load(key) {\n    try {\n      const jsonData = localStorage.getItem(key);\n      if (jsonData === null) {\n        return {};\n      } else {\n        const data = JSON.parse(jsonData);\n        return data;\n      }\n    } catch (error) {\n      throw error;\n    }\n  },\n  _delete: function _delete(key) {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      throw error;\n    }\n  },\n  saveFilter: function saveFilter(filter) {\n    this._save(this._filterID, filter);\n  },\n  loadFilter: function loadFilter() {\n    let filter = this._load(this._filterID);\n    return filter;\n  },\n  deleteFilter: function deleteFilter() {\n    this._delete(this._filterID);\n  },\n  saveCart: function saveCart(cart) {\n    this._save(this._cartID, cart);\n    refreshIcons('discountIcon');\n    drawHeaderCartNumber();\n  },\n  loadCart: function loadCart() {\n    let cart = this._load(this._cartID);\n    return cart;\n  },\n  deleteCart: function deleteCart() {\n    this._delete(this._cartID);\n  },\n};\n","// функція приймає markup - розмітка у вигляді рядка\n// та querySelector - селектор для кнопки закриття модального вікна\n\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nfunction onBasicLightbox(markup, querySelector) {\n  const instance = basicLightbox.create(markup, {\n    onShow: instance => {\n      document.addEventListener('keydown', onModal);\n      instance.element().querySelector(querySelector).onclick = instance.close;\n    },\n\n    onClose: () => {\n      document.removeEventListener('keydown', onModal);\n    },\n  });\n\n  function onModal(evt) {\n    if (evt.key === 'Escape') {\n      instance.close();\n    }\n  }\n\n  instance.show();\n}\nexport { onBasicLightbox };\n","export default \"__VITE_ASSET__883ded96__$_#close-icon__\"","export default \"__VITE_ASSET__29227195__$_#shopping-cart-icon__\"","import fetchAPI from './fetchApi.js';\nimport localStorageApi from './localStorageApi.js';\nimport { onBasicLightbox } from './modalClose.js';\nimport closeIcon from '../img/icons.svg#close-icon';\nimport shoppingCartIcon from '../img/icons.svg#shopping-cart-icon';\n\n// функція getProductModal(event, jsClass) викликається при кліку на картку\n// event - івент колбек функції при кліку на картку\n\n// cards.addEventListener(\"click\", handleClick); //слухач на контейнер з лішками\n\n// function handleClick(event) {\n//   if (event.target === event.currentTarget) {\n//     return;\n//   }\n//   if (event.target.classList.contains(\"basket\")) {\n//     // сюди потрібно прописати додавання продукту в Localstorage по id\n//     // console.log(\"you clicked basket\");\n//   } else {\n//     // console.log(\"you clicked product\");\n//     getProductModal(event, \".js-product-item\");\n//   }\n// }\n\n// jsClass - класс лішки, наприклад `<li data-productId=\"${_id}\" class=\"item js-product-item\">\n// в лішці обовязково має бути дата атрибут data-productId=\"${_id}\"\n\nasync function getProductModal(event, jsClass) {\n  const currentProduct = event.target.closest(jsClass);\n  const id = currentProduct.dataset.productid;\n  const { name, desc, img, category, price, size, popularity } =\n    await fetchAPI.product(id);\n\n  let basketText = 'Add to';\n\n  let cart = localStorageApi.loadCart();\n  if ('products' in cart) {\n    const idx = cart.products.findIndex(product => product.productId === id);\n    if (idx !== -1) {\n      basketText = 'Remove from';\n    }\n  }\n\n  const productModalMarkup = `<div class=\"container\">\n  <div class=\"modal-product\">\n      <button class=\"modal-button js-modal-close\" type=\"button\" >\n        <svg class=\"modal-form-icon\" width=\"28\" height=\"28\">\n              <use href=\"${closeIcon}\"></use>\n            </svg>\n      </button>\n      <div class=\"modal-product-top\">\n        <div class=\"modal-image-wrapper\">\n          <img\n            class=\"modal-product-image\"\n            src=\"${img}\"\n            alt=\"${name}\"\n            width=\"160\"\n            height=\"160\"\n          />\n        </div>\n        <div class=\"modal-dscr-wrapper\">\n          <h3 class=\"modal-product-title\">${name}</h3>\n          <div class=\"modal-product-prop-wrap\">\n            <p class=\"modal-product-prop\">\n              Category:\n              <span class=\"modal-product-prop-span\">${category}</span>\n            </p>\n            <p class=\"modal-product-prop\">\n              Size:\n              <span class=\"modal-product-prop-span\">${size}</span>\n            </p>\n            </div>\n            <p class=\"modal-product-prop\">\n              Popularity: <span class=\"modal-product-prop-span\">${popularity}</span>\n            </p>       \n          <p class=\"modal-product-prop-dscr\">${desc}</p>\n        </div>\n      </div>\n      <div class=\"modal-product-bottom\">\n        <p class=\"modal-product-price\">$${price}</p>\n        <button class=\"modal-product-cart js-modal-product-cart\" type=\"button\">\n          <span class=\"baskettext\">${basketText}</span> <svg class=\"modal-product-icon-basket\" width=\"18\" height=\"18\">\n              <use href=\"${shoppingCartIcon}\"></use>\n            </svg>\n        </button>\n      </div>\n    </div>\n    </div>`;\n\n  onBasicLightbox(productModalMarkup, '.js-modal-close');\n\n  document\n    .querySelector('.js-modal-product-cart')\n    .addEventListener('click', event => {\n      const btn = event.target.closest('.modal-product-cart');\n\n      let cart = localStorageApi.loadCart();\n\n      let notInCart = true;\n      if ('products' in cart) {\n        const resalt = cart.products.findIndex(\n          product => product.productId === id\n        );\n        if (resalt !== -1) {\n          cart.products.splice(resalt, 1);\n          btn.querySelector('.baskettext').innerHTML = 'Add to';\n          notInCart = false;\n        }\n      }\n\n      if (notInCart) {\n        if ('products' in cart) {\n          cart.products.push({\n            productId: id,\n            amount: 1,\n          });\n        } else {\n          cart = {\n            email: '',\n            products: [{ productId: id, amount: 1 }],\n          };\n        }\n        btn.querySelector('.baskettext').innerHTML = 'Remove from';\n      }\n\n      localStorageApi.saveCart(cart);\n    });\n}\n\nexport { getProductModal };\n","export default \"__VITE_ASSET__9a76fdad__$_#discount-icon__\"","export default \"__VITE_ASSET__bf8d566a__$_#discount-cart__\"","export default \"__VITE_ASSET__cb42c3c5__$_#discount-checked__\"","import fetchAPI from './fetchApi.js';\nimport localStorageApi from './localStorageApi.js';\nimport refsAPI from './refs.js';\nimport { getProductModal } from './modalProduct.js';\n\n// icons\nimport discountIcon from '../img/icons.svg#discount-icon';\nimport cartIcon from '../img/icons.svg#discount-cart';\nimport checkedIcon from '../img/icons.svg#discount-checked';\n\n// function to draw discount products section\nasync function drawDiscount() {\n  // number of products to draw\n  const DISCOUNTNUMBER = 2;\n  // get all nodes\n  const frontEnd = new refsAPI();\n  //clear\n  frontEnd.discountList.innerHTML = '';\n  //get list of discount products\n  const discountProducts = await fetchAPI.discount();\n\n  //array of products to draw\n  const productsToDraw = [];\n  let i = 0;\n  //do we have enough products to draw?\n  if (discountProducts.length < DISCOUNTNUMBER) {\n    i = discountProducts.length;\n  } else {\n    i = DISCOUNTNUMBER;\n  }\n  //choose random products and add to array to be drawn\n  for (; i > 0; i--) {\n    let randomNumber = Math.floor(Math.random() * discountProducts.length);\n    productsToDraw.push(discountProducts[randomNumber]);\n    discountProducts.splice(randomNumber, 1); //remove used products\n  }\n\n  //read saved Cart\n  let cart = localStorageApi.loadCart();\n  //get saved products id\n  const productsInCart = [];\n  if ('products' in cart) {\n    cart = cart.products;\n    cart.forEach(product => productsInCart.push(product.productId));\n  }\n  //draw discount products\n  const productsList = [];\n  productsToDraw.forEach(product => {\n    //chose icon\n    let icon = cartIcon;\n    if (productsInCart.includes(product._id)) {\n      icon = checkedIcon;\n    }\n    productsList.push(`\n        <li class=\"discount-list-item discount-show\" data-productId=\"${product._id}\">\n            <svg width=\"60\" height=\"60\" class=\"discount-icon discount-show\"  data-productId=\"${product._id}\">\n              <use href=\"${discountIcon}\" class=\"discount-show\"  data-productId=\"${product._id}\"></use>\n            </svg>\n            <div class=\"discount-image-box discount-show\"  data-productId=\"${product._id}\">\n              <img\n                class=\"discount-image discount-show\"\n                src=\"${product.img}\"\n                width=\"114\"\n                height=\"114\"\n                alt=\"${product.name}\"\n                data-productId=\"${product._id}\"\n              />\n            </div>\n            <div class=\"discount-description discount-show\"  data-productId=\"${product._id}\">\n              <p class=\"discount-title discount-show\"  data-productId=\"${product._id}\">${product.name}</p>\n              <div class=\"discount-description-price discount-show\"  data-productId=\"${product._id}\">\n                <span class=\"discount-price discount-show\"  data-productId=\"${product._id}\">$${product.price}</span>\n                <button type=\"button\" class=\"discount-icon-box discount-buy\" data-productId=\"${product._id}\">\n                  <svg width=\"18\" height=\"18\" class=\"discount-cart discount-buy\" data-productId=\"${product._id}\">\n                    <use href=\"${icon}\" class=\"js-object discount-buy\" data-jsname=\"discountIcon${product._id}\" data-productId=\"${product._id}\"></use>\n                  </svg>\n                </button>\n              </div>\n            </div>\n         </li>\n        `);\n  });\n  frontEnd.discountList.insertAdjacentHTML('beforeend', productsList.join(''));\n}\n\nfunction productInCart(id) {\n  //read saved Cart\n  let cart = localStorageApi.loadCart();\n  //check if product in cart\n  let inCart = false;\n  if ('products' in cart) {\n    cart.products.forEach(product => {\n      if (product.productId === id) {\n        inCart = true;\n        return;\n      }\n    });\n  }\n  return inCart;\n}\n\nfunction buyProduct(id) {\n  let cart = localStorageApi.loadCart();\n  //if not in cart then add\n  if (!productInCart(id)) {\n    if ('products' in cart) {\n      cart.products.push({\n        productId: id,\n        amount: 1,\n      });\n    } else {\n      cart = {\n        email: '',\n        products: [{ productId: id, amount: 1 }],\n      };\n    }\n    //save cart and change icon\n    localStorageApi.saveCart(cart);\n  }\n}\n\n//change icon after adding product to cart\nfunction setCheckedIcon(id, prefix) {\n  const frontEnd = new refsAPI();\n  if (frontEnd[`${prefix}${id}`].href.baseVal === `${cartIcon}`) {\n    frontEnd[`${prefix}${id}`].href.baseVal = `${checkedIcon}`;\n  }\n}\n\n//change icon after deleting product from cart\nfunction setCartIcon(id, prefix) {\n  const frontEnd = new refsAPI();\n  if (frontEnd[`${prefix}${id}`].href.baseVal === `${checkedIcon}`) {\n    frontEnd[`${prefix}${id}`].href.baseVal = `${cartIcon}`;\n  }\n}\n\n//change product icons after change of cart\nfunction refreshIcons(prefix) {\n  const frontEnd = new refsAPI();\n  for (var key in frontEnd) {\n    if (key.indexOf(prefix) === 0) {\n      let id = frontEnd[key].dataset.productid;\n      if (productInCart(id)) {\n        setCheckedIcon(id, prefix);\n      } else {\n        setCartIcon(id, prefix);\n      }\n    }\n  }\n}\n\n//callback for event listener\nfunction discountOnClick(event) {\n  if (event.target.classList.contains('discount-buy')) {\n    buyProduct(event.target.dataset.productid);\n  } else if (event.target.classList.contains('discount-show')) {\n    getProductModal(event, '.discount-show');\n  }\n}\n\n//draw number of categories in cart\n\nfunction drawHeaderCartNumber() {\n  const frontEnd = new refsAPI();\n  let cartNumber = 0;\n  let cart = localStorageApi.loadCart();\n  //check if cart empty\n  if ('products' in cart) {\n    cartNumber = cart.products.length;\n  }\n  console.log(cartNumber);\n  frontEnd.headerCartNumber.textContent = cartNumber;\n}\n\nexport {\n  drawDiscount,\n  discountOnClick,\n  buyProduct,\n  setCheckedIcon,\n  setCartIcon,\n  refreshIcons,\n  drawHeaderCartNumber,\n};\n","import fetchAPI from './fetchApi.js';\nimport localStorageApi from './localStorageApi.js';\nimport refsAPI from './refs.js';\n\nimport { getProductModal } from './modalProduct.js';\nimport { buyProduct } from './discount.js';\nlet frontEndPopular;\nlet popularProducts;\nlet product_Id;\nlet checkBtn;\n\nasync function renderPopular() {\n  frontEndPopular = new refsAPI();\n  frontEndPopular.PopularList.innerHTML = '';\n  popularProducts = await fetchAPI.popular();\n  // console.log(\"popularProducts\",popularProducts);\n  // ----------------\n  render();\n}\nfunction addProduct(event) {\n  const product = event.target.closest('.cards-item');\n  // console.log(product);\n  product_Id = product.dataset.productid;\n  checkBtn[`btn1${product_Id}`].style.display = 'none';\n  checkBtn[`check${product_Id}`].style.display = 'flex';\n  buyProduct(product_Id);\n\n  //   console.log(product_Id);\n}\n// -----------------------------------------------------------------------\nfunction handleModall(event) {\n  if (event.target.classList.contains('js-btn')) {\n    addProduct(event);\n    return;\n  }\n  if (!event.target.classList.contains('js-btn')) {\n    // const product = event.target.closest('.cards-item');\n    // product_Id = product.dataset.id;\n    // console.log(product_Id);\n    getProductModal(event, '.cards-item');\n\n    // alert();\n    return;\n  }\n}\n//  ================================================\n// localStorage.clear()\n// //   ---------------------------------------------------------\nexport function createMarcup(arr) {\n  return arr\n    .map(\n      ({ _id, img, name, category, size, popularity }) => ` \n    <li class =\"cards-item\" data-productid=\"${_id}\" >\n        <div id =\"${_id}\" class=\"photo-card\">\n                    <img class = \"cards__image\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\" />\n                 \n            </div> \n            <div class=\" discount-show\">\n                    <h3 class=\"info-title\">${name}</h3>      \n                    <p class=\"info-text\">\n                        Category:<span class=\"info-span\">${category}</span>\n                    </p>\n                    <wraper class=\"info-wraper\">\n                        <p class=\"info-text\">\n                            Size:<span class=\"info-span\">${size}</span>\n                        </p>\n                        <p class=\"info-text\">\n                            Popularity:<span class=\"info-span\">${popularity}</span>\n                        </p>\n                    </wraper>\n               </div>\n               <button id=\"${_id}\" class=\"popular-products-btn js-btn discount-buy js-object\" data-jsname=\"btn1${_id}\"  type=\"button\">\n                    <svg class=\"basket-icon-svg js-btn js-object\"  data-jsname=\"btn\" width=\"12\" height=\"12\">\n                        <use class=\"js-btn\" href=\"./img/icons.svg#shopping-cart-icon\"></use>\n                    </svg>\n                </button>\n                <div id=\"${_id}\" class=\"check-btn js-object\" data-jsname=\"check${_id}\" >\n                <svg data-jsname=\"check1\" class=\"check-icon-svg  discount-buy js-object\" width=\"12\" height=\"12\">\n                        <use href=\"./img/icons.svg#check-mark-icon\"></use>\n                    </svg></div>\n               </li>    \n               \n    \n`\n    )\n    .join('');\n}\n// // ---------------------------------------------------------------------\nasync function render() {\n  try {\n    const data = popularProducts;\n    //   console.log('render', data);\n    frontEndPopular.PopularList.insertAdjacentHTML(\n      'beforeend',\n      createMarcup(data)\n    );\n    checkBtn = new refsAPI();\n    // console.log(checkBtn);\n    let Mycart = localStorageApi.loadCart();\n    // console.log(\"Mycart\",Mycart.products);\n    //get saved products id\n    const productsInCart = [];\n    if ('products' in Mycart) {\n      Mycart = Mycart.products;\n      Mycart.forEach(product => productsInCart.push(product.productId));\n    }\n    //draw discount products\n    const productsList = [];\n    popularProducts.forEach(product => {\n      if (productsInCart.includes(product._id)) {\n        checkBtn[`btn1${product._id}`].style.display = 'none';\n        checkBtn[`check${product._id}`].style.display = 'flex';\n      }\n    });\n    return await data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n//   ---------------------------------------------------------\nexport { renderPopular, handleModall };\n// ----------------------------для main.js---------------\n//         import { renderPopular,handleModall } from './js/popularProducts.js';\n// renderPopular()\n//  frontEnd.PopularList.addEventListener('click', handleModall)\n","// -------------------Підключи цей код щоб працювало---------------------\n\n\nconst refs = {\n  openModalBtn: document.querySelector('[data-action=\"open-modal\"]'),\n  closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n  backdrop: document.querySelector('.js-backdrop'),\n  modalImg: document.querySelector('.modal__food-basket'),\n  modalInner: document.querySelector('.modal-inner'),\n};\n\nexport const form = document.querySelector('.footer-form');\n\nconst ESC_KEY_CODE = 'Escape';\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  document.body.classList.add('show-modal');\n}\n\nfunction onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.closeModalBtn.removeEventListener('click', onCloseModal);\n\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n  document.body.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(event) {\n  if (event.currentTarget === event.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(event) {\n  const isEscCode = event.code === ESC_KEY_CODE;\n  if (isEscCode) {\n    onCloseModal();\n  }\n}\n\nexport async function postEmail(params) {\n  params.preventDefault();\n\n  const email = params.target.elements.email.value;\n\n  console.log(email);\n\n  const obj = {\n    email: email,\n  };\n\n  const options = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(obj),\n  };\n\n  await fetch('https://food-boutique.b.goit.study/api/subscription', options)\n    .then(responce => {\n      responce.json();\n      console.log(responce);\n      if (responce.status === 409) {\n        onOpenModal();\n        refs.modalImg.style.display = 'none';\n        refs.modalInner.innerHTML = `\n        <div class=\"modal__title--wrap\">\n          <p class=\"modal__title\">\n            This\n            <span class=\"modal__accent-text\">email address </span>\n            has already been entered\n          </p>\n        </div>\n        <div class=\"modal__description--wrap\">\n          <p class=\"modal__description\">\n            You have already subscribed to our new products. Watch for offers at\n            the mailing address.\n          </p>\n        </div>`;\n        return;\n      }\n      if (responce.status === 201) {\n        onOpenModal();\n        refs.modalImg.style.display = 'block';\n        refs.modalInner.innerHTML = `\n        <div class=\"modal__title--wrap\">\n        <p class=\"modal__title\">\n          Thanks for subscribing for\n          <span class=\"modal__accent-text\">new</span>\n          products\n        </p>\n      </div>\n      <div class=\"modal__description--wrap\">\n        <p class=\"modal__description\">\n          We promise you organic and high-quality products that will meet your\n          expectations. Please stay with us and we promise you many pleasant\n          surprises.\n        </p>\n      </div>\n          `;\n        form.reset();\n        return;\n      }\n      onOpenModal();\n    })\n\n    .catch(error => console.log(error.message));\n}\n","import { buyProduct, setCheckedIcon } from './discount.js';\nimport fetchAPI from './fetchApi.js';\nimport { getProductModal } from './modalProduct.js';\nimport refsAPI from './refs.js';\n\nconst frontEnd = new refsAPI();\n\nfunction onCardClick(e) {\n  const cardId = e.target.closest('.product_card-item').dataset.productid;\n  \n  if (e.target.classList.contains('product_card-item') || e.target !== e.currentTarget) {\n    if (e.target.nodeName === \"use\" || e.target.nodeName === \"BUTTON\" || e.target.nodeName === \"svg\") {\n  \n      console.log(cardId)\n      buyProduct(cardId)\n      setCheckedIcon(cardId, 'shoppingCartIcon')\n  \n      return;\n    }\n  \n    getProductModal(e, '.product_card-item');\n\n    return\n  }\n  \n}\nfunction handleMarkup(data) {\n  const { category, img, name, popularity, price, size, _id, is10PercentOff } = data;\n\n  if (is10PercentOff) {\n    return `\n  <li class=\"product_card-item discount-list-item\" id=${_id} data-productId=\"${_id}\" >\n\n  <svg class=\"discount-icon\" id=${_id}>\n   <use href=\"icon.svg#discount-icon\"></use>\n </svg>\n       <div class=\"product_card-wrapper\">\n        <div class=\"card-img-wrapper\"><img src=\"${img}\" alt=\"${name}\" class=\"product_card-image\"></div>\n        <h2 class=\"product_card-name\">${name}</h2>\n        <div class=\"product_card-info\">\n            <p class=\"info-text\">\n                Category:<span class=\"info-span\">${category}</span>\n            </p>\n            <p class=\"info-text\">\n                Size:<span class=\"info-span\">${size}</span>\n            </p>\n            <p class=\"info-text\">\n                Popularity:<span class=\"info-span\">${popularity}</span>\n            </p>\n        </div>\n        <div class=\"product_card-bottom\">\n        <p class=\"product-curd-price\">$${price}</p>\n         <button id=\"${_id}\" class=\"card_buy-btn js-btn discount-buy js-object\" data-jsname=\"btn1${_id}\"  type=\"button\">\n                    <svg class=\"card_buy-icon-svg js-btn js-object\"  data-jsname=\"btn\" width=\"12\" height=\"12\">\n                        <use class=\"js-btn\" href=\"./img/icons.svg#shopping-cart-icon\"></use>\n                    </svg>\n                </button>\n                <div id=\"${_id}\" class=\"check-btn js-object\" data-jsname=\"check${_id}\" >\n                <svg data-jsname=\"check1\" class=\"check-icon-svg  discount-buy js-object\" width=\"12\" height=\"12\">\n                        <use href=\"./img/icons.svg#check-mark-icon\"></use>\n                    </svg></div>\n        </div>\n        </div>\n    </li>\n  `\n  }\n  \n  return `\n  <li class=\"product_card-item discount-list-item\" id=${_id} data-productId=\"${_id}\" >\n\n       <div class=\"product_card-wrapper\">\n        <div class=\"card-img-wrapper\"><img src=\"${img}\" alt=\"${name}\" class=\"product_card-image\"></div>\n        <h2 class=\"product_card-name\">${name}</h2>\n        <div class=\"product_card-info\">\n            <p class=\"info-text\">\n                Category:<span class=\"info-span\">${category}</span>\n            </p>\n            <p class=\"info-text\">\n                Size:<span class=\"info-span\">${size}</span>\n            </p>\n            <p class=\"info-text\">\n                Popularity:<span class=\"info-span\">${popularity}</span>\n            </p>\n        </div>\n        <div class=\"product_card-bottom\">\n        <p class=\"product-curd-price\">$${price}</p>\n        \n        <button id=\"${_id}\" class=\"card_buy-btn js-btn discount-buy js-object\" data-jsname=\"btn1${_id}\"  type=\"button\">\n                    <svg class=\"card_buy-icon-svg js-btn js-object\"  data-jsname=\"btn\" width=\"12\" height=\"12\">\n                        <use class=\"js-btn\" href=\"./img/icons.svg#shopping-cart-icon\"></use>\n                    </svg>\n                </button>\n                <div id=\"${_id}\" class=\"check-btn js-object\" data-jsname=\"check${_id}\" >\n                <svg data-jsname=\"check1\" class=\"check-icon-svg  discount-buy js-object\" width=\"12\" height=\"12\">\n                        <use href=\"./img/icons.svg#check-mark-icon\"></use>\n                    </svg></div>\n        </div>\n        </div>\n    </li>`\n};\n\nasync function renderCards() {\n  const productListApi = await fetchAPI.products();\n\n  productListApi.results.map(item => {\n    return frontEnd.productsList.insertAdjacentHTML('beforeend', handleMarkup(item));\n  }\n  )\n};\n\nfunction renderSearchedCards(category, search) {\n  frontEnd.productsList.innerHTML = '';\n  if (category) {\n    return category.map(item => frontEnd.productsList.insertAdjacentHTML('beforeend', handleMarkup(item)));\n  }\n  if (search) {\n    if (search.length === 0) {\n        window.alert('Oops something went wrong')\n      }\n    return search.map(item => frontEnd.productsList.insertAdjacentHTML('beforeend', handleMarkup(item)));\n  }\n};\n\nexport{onCardClick, renderCards, renderSearchedCards};\n\n","import fetchAPI from './fetchApi.js';\nimport {onCardClick, renderCards, renderSearchedCards, productsList} from './renderProductList.js'\n\nconst dropdownMenu = document.querySelector('#dropdownMenu');\nconst inputText = document.querySelector('#input-filter')\nconst buttonForm = document.querySelector('#filterButt')\nconst categoryContent = document.querySelector('.category-content')\nconst buttonCategory = document.querySelector('.dropdown-toggle')\nconst LOCAL_SAVE_INPUT = \"keyword\";\nconst LOCAL_SAVE_CATEGORY = \"category\";\n\nlet inputTextHolder = JSON.parse(localStorage.getItem(LOCAL_SAVE_INPUT));\nlet itemCategory = JSON.parse(localStorage.getItem(LOCAL_SAVE_CATEGORY));\n\n// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nfunction checkAndFillFormFields() {\n    if (inputTextHolder || itemCategory) {\n      inputText.value = inputTextHolder;\n      categoryContent.textContent = itemCategory;\n    }\n}\n\nasync function createDropdownList() {\n    const data = await fetchAPI.categories();\n\n    if (itemCategory !== null) {\n        categoryContent.textContent = itemCategory;\n    } else {\n        categoryContent.textContent = \"Categories\"\n    }\n\n    dropdownMenu.innerHTML = '';\n\n    data.forEach(async (item) => {\n        const listItem = document.createElement('div');\n        listItem.className = 'dropdown-item';\n        listItem.textContent = item;\n        listItem.onclick = async function () {\n            itemCategory = item;\n            localStorage.setItem(LOCAL_SAVE_CATEGORY, JSON.stringify(itemCategory));\n            toggleDropdown();\n        };\n        dropdownMenu.appendChild(listItem);\n    });\n}\n\nasync function toggleDropdown() {\n    dropdownMenu.style.display = (dropdownMenu.style.display === 'flex') ? 'none' : 'flex';\n\n    if (itemCategory !== null) {\n        categoryContent.textContent = itemCategory;\n    } else {\n        categoryContent.textContent = \"Categories\"\n    }\n\n    setTimeout(function () {\n        dropdownMenu.style.opacity = (dropdownMenu.style.opacity === '1') ? '0' : '1';\n    }, 10);\n}\n\n// -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nfunction inputPush(e) {\n    const value = e.target.value;\n    if (value) {\n        localStorage.setItem(LOCAL_SAVE_INPUT, JSON.stringify(value));\n    } else {\n        localStorage.setItem(LOCAL_SAVE_INPUT, JSON.stringify(null));\n    }\n}\n\n// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nasync function cardsCreate(event) {\n    event.preventDefault();\n    if (inputTextHolder == \"\") {\n        inputTextHolder = null;\n    } else {\n        inputTextHolder = JSON.parse(localStorage.getItem(LOCAL_SAVE_INPUT));\n    }\n\n    console.log(itemCategory, inputTextHolder);\n}\n\n\ncheckAndFillFormFields();\ncreateDropdownList();\n\n\n\n\nexport {\n    checkAndFillFormFields,\n    createDropdownList,\n    cardsCreate,\n    inputPush,\n    toggleDropdown,\n    buttonCategory,\n    inputText,\n    buttonForm\n}\n","\nimport refsAPI from './js/refs.js';\nconst frontEnd = new refsAPI();\n\nimport {drawDiscount, discountOnClick, drawHeaderCartNumber} from './js/discount.js';\nimport { renderPopular,handleModall } from './js/popularProducts.js';\n\nimport { form } from './js/footer-modal.js';\nimport { postEmail } from './js/footer-modal.js';\nimport {onCardClick, renderCards, renderSearchedCards} from './js/renderProductList.js';\nimport {checkAndFillFormFields, createDropdownList, cardsCreate, inputPush, toggleDropdown,  buttonCategory, inputText, buttonForm} from './js/filter.js';\n\n//get DOM tree\n// const frontEnd = new refsAPI();\n\n\n// Draw Header Cart Number\ndrawHeaderCartNumber();\n\n\n// RenderProuctList\nrenderCards();\n\n\n// Add event listener for  Product Cards\nfrontEnd.productsList.addEventListener('click', onCardClick);\n\n\n// Draw Popular products \nrenderPopular();\n\n\n// Add event listener for popular products\nfrontEnd.PopularList.addEventListener('click', handleModall);\n\n\n// Draw discount products\ndrawDiscount();\n\n\n// Create DropDown List\ncreateDropdownList();\n\n\n// Check Fields\ncheckAndFillFormFields();\n\n\n// Render Searched Cards\nrenderSearchedCards();\n\n\n// Add event listener for discount products\nfrontEnd.discountList.addEventListener('click', discountOnClick);\n\n// Filter\nbuttonCategory.addEventListener('click', toggleDropdown);\ninputText.addEventListener('input', inputPush);\nbuttonForm.addEventListener('click', cardsCreate);\n\n// Modal footer\nform.addEventListener('submit', postEmail);\n\n\n\n"],"names":["refsAPI","nodes","i","key","fetchAPI","axios","error","id","filter","params","email","cart","localStorageApi","data","jsonData","refreshIcons","drawHeaderCartNumber","onBasicLightbox","markup","querySelector","instance","basicLightbox.create","onModal","evt","closeIcon","shoppingCartIcon","getProductModal","event","jsClass","name","desc","img","category","price","size","popularity","basketText","product","productModalMarkup","btn","notInCart","resalt","discountIcon","cartIcon","checkedIcon","drawDiscount","frontEnd","discountProducts","productsToDraw","randomNumber","productsInCart","productsList","icon","productInCart","inCart","buyProduct","setCheckedIcon","prefix","setCartIcon","discountOnClick","cartNumber","frontEndPopular","popularProducts","product_Id","checkBtn","renderPopular","render","addProduct","handleModall","createMarcup","arr","_id","Mycart","refs","form","ESC_KEY_CODE","onOpenModal","onEscKeyPress","onCloseModal","onBackdropClick","postEmail","obj","options","responce","onCardClick","e","cardId","handleMarkup","is10PercentOff","renderCards","item","renderSearchedCards","search","dropdownMenu","inputText","buttonForm","categoryContent","buttonCategory","LOCAL_SAVE_INPUT","LOCAL_SAVE_CATEGORY","inputTextHolder","itemCategory","checkAndFillFormFields","createDropdownList","listItem","toggleDropdown","inputPush","value","cardsCreate"],"mappings":"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"}